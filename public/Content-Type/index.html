<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="It&#39;s my personal blog."><meta name="keywords" content="blog,kricsleo,IT,Web Front End"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>Content-Type | kricsleo</title><link rel="shortcut icon" href="/images/favicon.ico"><link rel="alternate" href="/atom.xml" title="kricsleo"><style>@font-face{font-family:RobotoMono-Iconfont;font-style:normal;font-display:swap;src:url(/fonts/RobotoMono-Iconfont.woff) format("woff")}.loader{position:fixed;width:100%;height:100%;top:0;left:0;background-color:rgba(255,255,255,.7);z-index:999;transition:all .4s}.loader:before{content:'';display:block;position:absolute;left:50%;top:50%;width:50px;height:50px;margin-top:-25px;margin-left:-25px;background-color:#0097e4;-webkit-animation:rotateplane 1.2s infinite ease-in-out;animation:rotateplane 1.2s infinite ease-in-out}.loader:after{content:'loading';font-family:RobotoMono-Iconfont;visibility:hidden}@-webkit-keyframes rotateplane{0%{-webkit-transform:perspective(120px)}50%{-webkit-transform:perspective(120px) rotateY(180deg)}100%{-webkit-transform:perspective(120px) rotateY(180deg) rotateX(180deg)}}@keyframes rotateplane{0%{transform:perspective(120px) rotateX(0) rotateY(0);-webkit-transform:perspective(120px) rotateX(0) rotateY(0)}50%{transform:perspective(120px) rotateX(-180.1deg) rotateY(0);-webkit-transform:perspective(120px) rotateX(-180.1deg) rotateY(0)}100%{transform:perspective(120px) rotateX(-180deg) rotateY(-179.9deg);-webkit-transform:perspective(120px) rotateX(-180deg) rotateY(-179.9deg)}}</style></head></html><body><div class="loader"></div><header class="l_header" style="display:none"><div class="wrapper"><div class="nav-main container container--flex"><a class="logo flat-box" href="/">kricsleo</a><div class="menu"><ul class="h-list"><li><a class="flat-box nav-home" href="/">Home</a></li><li><a class="flat-box nav-archives" href="/archives">Archives</a></li><li><a class="flat-box nav-about" href="https://github.com/kricsleo">About</a></li></ul><div class="underline"></div></div><div class="m_search"><form name="searchform" class="form u-search-form"><input type="text" class="input u-search-input" placeholder="Search"> <span class="iconfont icon-search"></span></form></div><ul class="switcher h-list"><li class="s-search"><a href="javascript:void(0)"><span class="iconfont icon-search flat-box"></span></a></li><li class="s-menu"><a href="javascript:void(0)"><span class="iconfont icon-menu flat-box"></span></a></li></ul></div><div class="nav-sub container container--flex"><a class="logo" href="javascript:void(0)">Word of Forks</a><ul class="switcher h-list"><li class="s-comment"><a href="javascript:void(0)"><span class="iconfont icon-chat_bubble_outline flat-box"></span></a></li><li class="s-top"><a href="javascript:void(0)"><span class="iconfont icon-arrow_upward flat-box"></span></a></li><li class="s-toc"><a href="javascript:void(0)"><span class="iconfont icon-format_list_numbered flat-box"></span></a></li></ul></div></div></header><div class="l_body" style="display:none"><div class="container clearfix"><div class="l_main"><article id="post-Content-Type" class="post white-box article-type-post" itemscope itemprop="blogPost"><section class="toc-wrapper active"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Content-Type"><span class="toc-number">1.</span> <span class="toc-text">Content-Type</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#http请求结构"><span class="toc-number">1.1.</span> <span class="toc-text">http请求结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Content-Type类型"><span class="toc-number">1.2.</span> <span class="toc-text">Content-Type类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#application-x-www-urlencoded"><span class="toc-number">1.2.1.</span> <span class="toc-text">application/x-www-urlencoded</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#multipart-form-data"><span class="toc-number">1.2.2.</span> <span class="toc-text">multipart/form-data</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#application-json"><span class="toc-number">1.2.3.</span> <span class="toc-text">application/json</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#text-xml"><span class="toc-number">1.2.4.</span> <span class="toc-text">text/xml</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考文章"><span class="toc-number">1.3.</span> <span class="toc-text">参考文章</span></a></li></ol></li></ol></section><section class="article typo"><div class="article-entry" itemprop="articleBody"><h1 id="Content-Type"><a href="#Content-Type" class="headerlink" title="Content-Type"></a>Content-Type</h1><p><code>HTTP/1.1</code>协议规定的<code>HTTP</code>请求方法有<code>OPTIONS</code>、<code>GET</code>、<code>HEAD</code>、<code>POST</code>、<code>PUT</code>、<code>DELETE</code>、<code>TRACE</code>、<code>CONNECT</code>这几种, 用的最多的是<code>GET</code>和<code>POST</code>, 这里主要说一下提交请求时的请求头中<code>Content-Type</code>字段<br><a id="more"></a></p><h2 id="http请求结构"><a href="#http请求结构" class="headerlink" title="http请求结构"></a><code>http</code>请求结构</h2><p><code>http</code>请求分为三个部分: 状态行, 请求头和消息主体, 结构如下:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;method&gt; &lt;request url&gt; &lt;version&gt;</span><br><span class="line">&lt;headers&gt;</span><br><span class="line"></span><br><span class="line">&lt;entity-body&gt;</span><br></pre></td></tr></table></figure><h2 id="Content-Type类型"><a href="#Content-Type类型" class="headerlink" title="Content-Type类型"></a>Content-Type类型</h2><p><code>Content-Type</code>有如下常见的类型:</p><ul><li><code>text/plain</code>: 文本类型</li><li><code>text/html</code>: html文件类型</li><li><code>text/css</code>: css文件类型</li><li><code>text/javascript</code>: javascript文件类型</li><li><code>application/x-www-form-urlencoded</code> POST讨论</li><li><code>multipart/form-data</code> POST讨论</li><li><code>application/json</code> POST讨论</li><li><code>text/xml</code> POST中讨论</li></ul><p>由于<code>GET</code>方式的数据实际上是以<code>QueryString</code>的方式放在<code>&lt;request url&gt;</code>中的(非ASCII字符会被转码), 例如’<a href="https://www.example.com?key1=value1&amp;key2=value2" target="_blank" rel="noopener">https://www.example.com?key1=value1&amp;key2=value2</a>‘, 所以对<code>GET</code>讨论<code>Content-Type</code>没有意义</p><p><code>http</code>协议规定<code>POST</code>提交的数据必须放在消息主体（entity-body）中，但协议并没有规定数据必须使用什么编码方式。实际上，开发者完全可以自己决定消息主体的格式，只要最后发送的<code>HTTP</code>请求满足上面的格式就可以。</p><p>服务端通常是根据请求头（headers）中的<code>Content-Type</code>字段来获知请求中的消息主体是用何种方式编码，再对主体进行解析。所以有必要了解<code>Content-Type</code>的内容. 目前在<code>POST</code>请求中所使用的<code>Content-Type</code>主要有如下四种类型: <code>application/x-www-urlencoded</code>, <code>multipart/form-data</code>, <code>application/json</code>, <code>text/xml</code>, 下面详细说一下这四种类型.</p><h3 id="application-x-www-urlencoded"><a href="#application-x-www-urlencoded" class="headerlink" title="application/x-www-urlencoded"></a><code>application/x-www-urlencoded</code></h3><p>这应该是最常见的<code>POST</code>提交数据的方式了。浏览器的原生<code>&lt;form&gt;</code>表单，如果不设置<code>enctype</code>属性，那么默认就会以这种方式提交数据。这种方式会将表单中的数据按照<code>key1=value1&amp;key2=value2</code>的形式连接成字符串, 同时会将出现的非<code>ASCII</code>字符进行编码, 编码方式可以参考<code>encodeURIComponent()</code>函数, 例如下面这个表单提交时的数据结构:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">POST http://www.example.com HTTP/1.1</span><br><span class="line">Content-Type: application/x-www-form-urlencoded;charset=utf-8</span><br><span class="line"></span><br><span class="line">title=test&amp;sub%5B%5D=1&amp;sub%5B%5D=2&amp;sub%5B%5D=3</span><br></pre></td></tr></table></figure><p>但是需要注意的是这是在<code>&lt;form&gt;</code>表单中没有<code>type=file</code>形内容的时候的提交方式, 如果表单中有二进制内容需要提交, 比如文件或者图片等, 那么就无法使用<code>application/x-www-urlencoded</code>方式, 需要转而使用下面会谈到的<code>multipart/form-data</code>方式.</p><h3 id="multipart-form-data"><a href="#multipart-form-data" class="headerlink" title="multipart/form-data"></a><code>multipart/form-data</code></h3><p>当需要提交二进制数据如文件或者图片时就需要使用这种<code>multipart/form-data</code>, 一个常见的提交内容结构如下:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">POST http://www.example.com HTTP/1.1</span><br><span class="line">Content-Type:multipart/form-data; boundary=----WebKitFormBoundaryrGKCBY7qhFd3TrwA</span><br><span class="line"></span><br><span class="line">------WebKitFormBoundaryrGKCBY7qhFd3TrwA</span><br><span class="line">Content-Disposition: form-data; name=&quot;text&quot;</span><br><span class="line"></span><br><span class="line">title</span><br><span class="line">------WebKitFormBoundaryrGKCBY7qhFd3TrwA</span><br><span class="line">Content-Disposition: form-data; name=&quot;file&quot;; filename=&quot;chrome.png&quot;</span><br><span class="line">Content-Type: image/png</span><br><span class="line"></span><br><span class="line">PNG ... content of chrome.png ...</span><br><span class="line">------WebKitFormBoundaryrGKCBY7qhFd3TrwA--</span><br></pre></td></tr></table></figure><p>请求头中的<code>boundary</code>代表将使用后面这一长串的字符串来分隔不同的字段, 消息主体里按照字段个数又分为多个结构类似的部分，每部分都是以<code>--boundary</code>开始，紧接着是内容描述信息，然后是回车，最后是字段具体内容（文本或二进制）。如果传输的是文件，还要包含文件名和文件类型信息。消息主体最后以<code>--boundary--</code>标示结束, 关于<code>multipart/form-data</code>的详细定义，请前往<a href="http://www.ietf.org/rfc/rfc1867.txt" target="_blank" rel="noopener">rfc1867</a>查看。</p><p><code>application/x-www-urlencoded</code>和<code>multipart/form-data</code>都是浏览器原生支持的，而且现阶段标准中原生<code>&lt;form&gt;</code>表单也只支持这两种方式（通过<code>&lt;form&gt;</code>元素的<code>enctype</code>属性指定，默认为 application/x-www-form-urlencoded。其实<code>enctype</code>还支持<code>text/plain</code>，不过用得非常少）。</p><p>下面提到的<code>Content-Type</code>属于随着技术的发展, 我们自定义出来的新的数据提交方式, 更为便捷.</p><h3 id="application-json"><a href="#application-json" class="headerlink" title="application/json"></a><code>application/json</code></h3><p>因为<code>json</code>格式数据的读写性非常好, 用的也极为广泛, 所以<code>application/json</code>这个请求头也用的越来越多, 这个请求头就是告诉服务器发送的数据是序列化后的<code>json</code>字符串, 现在在做的<code>Vue</code>项目中用到的<code>Axios</code>所使用的默认就是<code>application/json</code>, 这里有一个问题就是Axios全局设置<code>Content-Type</code>为<code>application/x-www-urlencoded</code>不生效, 需要在请求发出前拦截方法中修改配置才能生效, 不知道是不是bug, 如下:</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_interceptorRequest</span>(<span class="params">config</span>) </span>&#123;</span><br><span class="line">  config.headers[<span class="string">'Content-Type'</span>] = <span class="string">'application/x-www-form-urlencoded; charset=utf-8'</span>;</span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用<code>application/json</code>方式发送的数据结构类似下面这个:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">POST http://www.example.com HTTP/1.1 </span><br><span class="line">Content-Type: application/json;charset=utf-8</span><br><span class="line"></span><br><span class="line">&#123;&quot;title&quot;:&quot;test&quot;,&quot;sub&quot;:[1,2,3]&#125;</span><br></pre></td></tr></table></figure><p><code>json</code>格式可以提交结构复杂的数据,在抓包工具或者调试中查看起来也很方便, 尤其适合<code>RESEful</code>的接口, 需要注意的是不论我们使用<code>application/x-www-urlencoded</code>还是<code>application/json</code>都要注意和服务器相配合, 因为毕竟我们发送的数据是希望服务器来正确接收和处理的, 如果客户端设置的<code>Content-Type</code>与服务端期望接收的<code>Content-Type</code>不一致就很有可能导致服务器无妨正常处理这个请求.</p><h3 id="text-xml"><a href="#text-xml" class="headerlink" title="text/xml"></a>text/xml</h3><p>这是一种使用<code>HTTP</code>作为传输协议，<code>XML</code>作为编码方式的远程调用规范, 典型的<code>XML-RPC</code>请求如下:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">POST http://www.example.com HTTP/1.1</span><br><span class="line">Content-Type: text/xml</span><br><span class="line"></span><br><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;methodCall&gt;</span><br><span class="line">    &lt;methodName&gt;examples.getStateName&lt;/methodName&gt;</span><br><span class="line">    &lt;params&gt;</span><br><span class="line">        &lt;param&gt;</span><br><span class="line">            &lt;value&gt;&lt;i4&gt;41&lt;/i4&gt;&lt;/value&gt;</span><br><span class="line">        &lt;/param&gt;</span><br><span class="line">    &lt;/params&gt;</span><br><span class="line">&lt;/methodCall&gt;</span><br></pre></td></tr></table></figure><p><code>XML-RPC</code>协议简单、功能够用，各种语言的实现都有。它的使用也很广泛，如<code>WordPress</code>的<code>XML-RPC</code>Api，搜索引擎的<code>ping</code>服务等等。<code>JavaScript</code>中，也有现成的库支持以这种方式进行数据交互，能很好的支持已有的 <code>XML-RPC</code>服务。</p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><ul><li><a href="https://imququ.com/post/four-ways-to-post-data-in-http.html" target="_blank" rel="noopener">四种常见的POST提交数据方式</a></li><li><a href="https://www.chenshaowen.com/blog/content-type-http-header.html" target="_blank" rel="noopener">HTTP Header之Content-Type</a></li></ul></div><div class="article-tags tags iconfont icon-tag"><a href="/tags/Content-Type/">Content-Type</a></div><div class="art-item-footer"><span class="art-item-left"><i class="iconfont icon-arrow-circle-left"></i>上一篇: <a href="/same-origin-and-CORS/" rel="prev" title="same-origin-and-CORS">same-origin-and-CORS </a></span><span class="art-item-right">下一篇: <a href="/http/" rel="next" title="http">http </a><i class="iconfont icon-arrow-circle-right"></i></span></div></section></article><script>window.subData={title:"Content-Type",subtitle:"",tools:!0}</script></div><aside class="l_side"><section class="m_widget about"><img class="avatar" src="" data-src="/images/avatar_blog.png"><div class="content"><div class="desc">Developers&#39; lives matter.</div></div></section><section class="m_widget categories"><div class="header">Categories</div><div class="content"><ul class="entry"><li><a class="flat-box" href="/categories/daily/"><div class="name">daily</div><div class="badget">1</div></a></li><li><a class="flat-box" href="/categories/database/"><div class="name">database</div><div class="badget">1</div></a></li><li><a class="flat-box" href="/categories/framework/"><div class="name">framework</div><div class="badget">1</div></a></li><li><a class="flat-box" href="/categories/front-end/"><div class="name">front-end</div><div class="badget">27</div></a></li><li><a class="flat-box" href="/categories/http/"><div class="name">http</div><div class="badget">2</div></a></li><li><a class="flat-box" href="/categories/tool/"><div class="name">tool</div><div class="badget">6</div></a></li><li><a class="flat-box" href="/categories/translation/"><div class="name">translation</div><div class="badget">1</div></a></li></ul></div></section><div class="m_widget tagcloud"><div class="header">Tags</div><div class="content"><a href="/tags/AST/" style="font-size:14px;color:grey">AST</a> <a href="/tags/CORS/" style="font-size:14px;color:grey">CORS</a> <a href="/tags/CSS/" style="font-size:14px;color:grey">CSS</a> <a href="/tags/Content-Type/" style="font-size:14px;color:grey">Content-Type</a> <a href="/tags/ES6/" style="font-size:17px;color:#404040">ES6</a> <a href="/tags/HTTP/" style="font-size:14px;color:grey">HTTP</a> <a href="/tags/HTTP-2-0/" style="font-size:14px;color:grey">HTTP/2.0</a> <a href="/tags/JavaScript/" style="font-size:14px;color:grey">JavaScript</a> <a href="/tags/MVC/" style="font-size:14px;color:grey">MVC</a> <a href="/tags/MVP/" style="font-size:14px;color:grey">MVP</a> <a href="/tags/MVVM/" style="font-size:14px;color:grey">MVVM</a> <a href="/tags/Mini-Program/" style="font-size:14px;color:grey">Mini-Program</a> <a href="/tags/SASS/" style="font-size:14px;color:grey">SASS</a> <a href="/tags/ast/" style="font-size:14px;color:grey">ast</a> <a href="/tags/async/" style="font-size:14px;color:grey">async</a> <a href="/tags/callback/" style="font-size:14px;color:grey">callback</a> <a href="/tags/codeStyle/" style="font-size:14px;color:grey">codeStyle</a> <a href="/tags/cookie/" style="font-size:14px;color:grey">cookie</a> <a href="/tags/css/" style="font-size:20px;color:#000">css</a> <a href="/tags/docker/" style="font-size:14px;color:grey">docker</a> <a href="/tags/elasticsearch/" style="font-size:14px;color:grey">elasticsearch</a> <a href="/tags/encrypt/" style="font-size:17px;color:#404040">encrypt</a> <a href="/tags/flex/" style="font-size:14px;color:grey">flex</a> <a href="/tags/function/" style="font-size:14px;color:grey">function</a> <a href="/tags/git/" style="font-size:20px;color:#000">git</a> <a href="/tags/h5/" style="font-size:17px;color:#404040">h5</a> <a href="/tags/http/" style="font-size:14px;color:grey">http</a> <a href="/tags/javascript/" style="font-size:14px;color:grey">javascript</a> <a href="/tags/js怪异事件录/" style="font-size:14px;color:grey">js怪异事件录</a> <a href="/tags/markdown/" style="font-size:14px;color:grey">markdown</a> <a href="/tags/nginx/" style="font-size:14px;color:grey">nginx</a> <a href="/tags/nodejs/" style="font-size:14px;color:grey">nodejs</a> <a href="/tags/object/" style="font-size:14px;color:grey">object</a> <a href="/tags/optimize/" style="font-size:14px;color:grey">optimize</a> <a href="/tags/promise/" style="font-size:14px;color:grey">promise</a> <a href="/tags/react/" style="font-size:14px;color:grey">react</a> <a href="/tags/redux/" style="font-size:14px;color:grey">redux</a> <a href="/tags/same-origin/" style="font-size:14px;color:grey">same-origin</a> <a href="/tags/service-worker/" style="font-size:14px;color:grey">service-worker</a> <a href="/tags/shell/" style="font-size:14px;color:grey">shell</a> <a href="/tags/speed/" style="font-size:14px;color:grey">speed</a> <a href="/tags/ssh/" style="font-size:14px;color:grey">ssh</a> <a href="/tags/toLocaleString/" style="font-size:14px;color:grey">toLocaleString</a> <a href="/tags/vue/" style="font-size:14px;color:grey">vue</a> <a href="/tags/web-font/" style="font-size:14px;color:grey">web-font</a> <a href="/tags/web优化/" style="font-size:14px;color:grey">web优化</a> <a href="/tags/yahoo/" style="font-size:14px;color:grey">yahoo</a> <a href="/tags/前端模块化/" style="font-size:14px;color:grey">前端模块化</a> <a href="/tags/国际化/" style="font-size:14px;color:grey">国际化</a></div></div><section class="m_widget links"><div class="header">Links</div><div class="content"><ul class="entry"><li><a class="flat-box" target="_blank" href="https://996.icu/#/zh_CN"><div class="name">996.icu</div></a></li></ul></div></section></aside></div></div><footer class="l_footer clearfix" style="display:none"><div class="copyright">©2018 By <a href="https://github.com/kricsleo">kricsleo</a></div><div class="framework-info">Diven - <a href="https://hexo.io/zh-cn/">Hexo</a></div></footer><script>function loadCSS() {
    const doc = document;
    const link = doc.createElement('link');
    link.rel = 'stylesheet';
    link.href = '/style.css';
    // link.href = 'https://store.kricsleo.com/blog/static/css/style.css';
    link.onload = () => {
      const dLoader = doc.getElementsByClassName('loader')[0];
      dLoader.style.opacity = 0;
      setTimeout(() => {
        dLoader.parentNode.removeChild(dLoader);
      }, 400);
    }
    doc.head.appendChild(link);
  }
  loadCSS();</script><script src="/js/index.js"></script></body>