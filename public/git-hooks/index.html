<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="It&#39;s my personal blog."><meta name="keywords" content="blog,kricsleo,IT,Web Front End"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>git-hooks | kricsleo</title><link rel="shortcut icon" href="/images/favicon.ico"><link rel="alternate" href="/atom.xml" title="kricsleo"><style>@font-face{font-family:RobotoMono-Iconfont;font-style:normal;font-display:swap;src:url(/fonts/RobotoMono-Iconfont.woff) format("woff")}.loader{position:fixed;width:100%;height:100%;top:0;left:0;background-color:rgba(255,255,255,.7);z-index:999;transition:all .4s}.loader:before{content:'';display:block;position:absolute;left:50%;top:50%;width:50px;height:50px;margin-top:-25px;margin-left:-25px;background-color:#0097e4;-webkit-animation:rotateplane 1.2s infinite ease-in-out;animation:rotateplane 1.2s infinite ease-in-out}.loader:after{content:'loading';font-family:RobotoMono-Iconfont;visibility:hidden}@-webkit-keyframes rotateplane{0%{-webkit-transform:perspective(120px)}50%{-webkit-transform:perspective(120px) rotateY(180deg)}100%{-webkit-transform:perspective(120px) rotateY(180deg) rotateX(180deg)}}@keyframes rotateplane{0%{transform:perspective(120px) rotateX(0) rotateY(0);-webkit-transform:perspective(120px) rotateX(0) rotateY(0)}50%{transform:perspective(120px) rotateX(-180.1deg) rotateY(0);-webkit-transform:perspective(120px) rotateX(-180.1deg) rotateY(0)}100%{transform:perspective(120px) rotateX(-180deg) rotateY(-179.9deg);-webkit-transform:perspective(120px) rotateX(-180deg) rotateY(-179.9deg)}}</style></head></html><body><div class="loader"></div><header class="l_header" style="display:none"><div class="wrapper"><div class="nav-main container container--flex"><a class="logo flat-box" href="/">kricsleo</a><div class="menu"><ul class="h-list"><li><a class="flat-box nav-home" href="/">Home</a></li><li><a class="flat-box nav-archives" href="/archives">Archives</a></li><li><a class="flat-box nav-about" href="https://github.com/kricsleo">About</a></li></ul><div class="underline"></div></div><div class="m_search"><form name="searchform" class="form u-search-form"><input type="text" class="input u-search-input" placeholder="Search"> <span class="iconfont icon-search"></span></form></div><ul class="switcher h-list"><li class="s-search"><a href="javascript:void(0)"><span class="iconfont icon-search flat-box"></span></a></li><li class="s-menu"><a href="javascript:void(0)"><span class="iconfont icon-menu flat-box"></span></a></li></ul></div><div class="nav-sub container container--flex"><a class="logo" href="javascript:void(0)">Word of Forks</a><ul class="switcher h-list"><li class="s-comment"><a href="javascript:void(0)"><span class="iconfont icon-chat_bubble_outline flat-box"></span></a></li><li class="s-top"><a href="javascript:void(0)"><span class="iconfont icon-arrow_upward flat-box"></span></a></li><li class="s-toc"><a href="javascript:void(0)"><span class="iconfont icon-format_list_numbered flat-box"></span></a></li></ul></div></div></header><div class="l_body" style="display:none"><div class="container clearfix"><div class="l_main"><article id="post-git-hooks" class="post white-box article-type-post" itemscope itemprop="blogPost"><section class="toc-wrapper active"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#git-hooks"><span class="toc-number">1.</span> <span class="toc-text">git hooks</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#pre-commit"><span class="toc-number">1.1.</span> <span class="toc-text">pre-commit</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#post-update"><span class="toc-number">1.2.</span> <span class="toc-text">post-update</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考文章"><span class="toc-number">1.3.</span> <span class="toc-text">参考文章</span></a></li></ol></li></ol></section><section class="article typo"><div class="article-entry" itemprop="articleBody"><h1 id="git-hooks"><a href="#git-hooks" class="headerlink" title="git hooks"></a>git hooks</h1><p>现在代码一般都会使用git来进行管理, 其中git hooks(git钩子)是git提供的在代码管理的生命周期中会被触发的一个阶段, 如同react里面组件的生命周期一样, 随着组件的状态的改变, 一些生命周期函数会被触发, 然后可以在触发的时候进行自定义的操作, git 也是如此, 例如我们可以在代码被提交(<code>git commit</code>)前进行代码的自动检查, 通过了检查才允许提交, 否则提交失败, 然后还有常见的自动化部署也是利用了 git hooks, 当新代码被提交到服务端(<code>git push</code>)的时候触发git hooks, 然后服务器自动进行重新部署.</p><a id="more"></a><p>我目前的使用来说用到了上面提供的两个钩子<code>pre-commit</code>(<code>git commit</code>时触发)和<code>post-update</code>(<code>git push</code>时触发)</p><p>一个是在本地提交js代码的时候使用eslint先对代码进行lint, lint通过后才允许提交, 否则提交失败, 修正不合约的语法之后再次进行提交, 这样强制性的代码lint可以一定程度保证团队协作时代码的风格和质量.</p><p>另一个是我博客的搜索服务是部署在阿里云ECS的docker里面的, 每次我对搜索相关的代码改动的时候, 就会推送到我的服务器里, 然后服务器上通过<code>post-update</code>钩子接收到新的提交时就会执行我写好的脚本, 自动使用最新代码进行docker的重新构建和运行, 很是方便</p><p>每一个git仓库在初始化的时候都会在项目的<code>.git/hooks</code>目录下初始化默认的钩子脚本<br></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 进入项目根目录后查看默认的钩子脚本</span></span><br><span class="line"><span class="built_in">cd</span> .git/hooks &amp;&amp; ls</span><br><span class="line"><span class="comment"># 有如下默认的钩子脚本</span></span><br><span class="line">applypatch-msg.sample     pre-applypatch.sample     pre-receive.sample</span><br><span class="line">commit-msg.sample         pre-commit.sample         prepare-commit-msg.sample</span><br><span class="line">fsmonitor-watchman.sample pre-push.sample           update.sample</span><br><span class="line">post-update.sample        pre-rebase.sample</span><br></pre></td></tr></table></figure><p></p><p>每个脚本后都带有<code>.sample</code>后缀, 这是因为这些钩子脚本默认都是不执行的, 如果需要使用哪个钩子, 那么就把后缀去掉, 然后就可以执行了</p><p>关于各个钩子的调用时机可以查看<a href="https://git-scm.com/docs/githooks#_hooks" target="_blank" rel="noopener">HOOKS</a></p><p>不过需要注意的是<code>.git</code>目录下的内容是不在git的版本管理里面的, 所以你如果更改了本地的钩子脚本, 那么默认情况下是不会被提交的, 如果需要这些内容也能够像其他代码一样在团队之间保持一致的话, 可以把这些钩子文件移出<code>.git</code>目录, 这样提交代码的时候就会提交这部分内容, 然后每一次代码更新以后再把这些脚本复制回<code>.git/hooks</code>目录中(复制的过程也可以通过钩子来自动完成, 不用手动复制, 钩子脚本里面加上拷贝文件的命令就可以了)</p><h2 id="pre-commit"><a href="#pre-commit" class="headerlink" title="pre-commit"></a><code>pre-commit</code></h2><p><code>pre-commit</code>是客户端钩子, 在键入提交信息前在本地运行, 它用于检查即将提交的快照, 如果该钩子以非零值退出，Git 将放弃此次提交，不过你可以用<code>git commit --no-verify</code>来绕过这个环节</p><p>例如对本次提交的<code>js</code>和<code>jsx</code>文件进行eslint检查, 如果有文件无法通过检查, 那么将会退出此次提交<br></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep <span class="string">".jsx\&#123;0,1\&#125;$"</span>)</span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">"<span class="variable">$STAGED_FILES</span>"</span> = <span class="string">""</span> ]]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">exit</span> 0</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">PASS=<span class="literal">true</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\nValidating Javascript:\n"</span></span><br><span class="line"><span class="comment"># Check for eslint</span></span><br><span class="line"><span class="built_in">which</span> eslint &amp;&gt; /dev/null</span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">"$?"</span> == 1 ]]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\t\033[41mPlease install ESlint\033[0m"</span></span><br><span class="line"><span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">for</span> FILE <span class="keyword">in</span> <span class="variable">$STAGED_FILES</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">eslint <span class="string">"<span class="variable">$FILE</span>"</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">"$?"</span> == 0 ]]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\t\033[32mESLint Passed: <span class="variable">$FILE</span>\033[0m"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\t\033[41mESLint Failed: <span class="variable">$FILE</span>\033[0m"</span></span><br><span class="line">PASS=<span class="literal">false</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\nJavascript validation completed!\n"</span></span><br><span class="line"><span class="keyword">if</span> ! <span class="variable">$PASS</span>; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\033[41mCOMMIT FAILED:\033[0m Your commit contains files that should pass ESLint but do not. Please fix the ESLint errors and try again.\n"</span></span><br><span class="line"><span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\033[42mCOMMIT SUCCEEDED\033[0m\n"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">exit</span> $?</span><br></pre></td></tr></table></figure><p></p><h2 id="post-update"><a href="#post-update" class="headerlink" title="post-update"></a><code>post-update</code></h2><p><code>post-update</code>是服务端钩子, 在服务器收到新的代码推送(<code>git push</code>)的时候运行, 自动化部署就利用这个钩子, 每次向服务器推送代码, 就触发该钩子然后服务器开始部署新代码</p><p>例如我的博客的搜索目前就是采用这种方式, 搜索使用的是<a href="https://koa.bootcss.com/" target="_blank" rel="noopener"><code>koa</code>框架</a>来做服务端, 代码其实很简单, 只有一个文件, 就是连接我的es, 然后依据查询参数到es中查询文章数据, 然后返回去, 不过中间复杂一点的是使用了<code>nginx</code>来代理(后期还打算通过<code>nginx</code>把被墙的<code>Disqus</code>接进来作为博客的评论系统, 这是后话了), 我的node端是运行在docker里面的, 所以还写了一个<code>Dockerfile</code>来每次拉新代码以后就重新构建docker镜像, 然后使用新的镜像来生成一个搜索容器, 这一套流程还是比较麻烦的, 不过使用自动化的话就能省不少事</p><p>服务端配置钩子也还是很方便的, 主要就是新建一个git裸仓, git裸仓一般也被作为远程的中心仓库, 这个仓库无法直接作为工作区, 也就是说在这个仓库里是不能进行<code>git commit</code>等操作的, 里面也没有项目源文件而是包含着文件版本历史, 一般是作为共享区来使用, 命名一般为<code>xxx.git</code>的形式, 例如你经常<code>clone</code>的git仓库就是这样的. 我们可以使用<code>git push</code>来向裸仓中提交版本记录, 也可以使用<code>git pull</code>从裸仓中拉取最新的版本</p><p>新建一个本地仓库的命令是<code>git init</code>, 而新建一个裸仓的命令是<code>git init --bare</code></p><p>例如我在服务器上新建一个裸仓用来接受我本地向它提交代码<br></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 新建一个目录用来存放裸仓</span></span><br><span class="line">mkdir ks.git &amp;&amp; <span class="built_in">cd</span> ks.git</span><br><span class="line"><span class="comment"># 初始化裸仓</span></span><br><span class="line">git init --bare</span><br></pre></td></tr></table></figure><p></p><p>一个裸仓就建好了</p><p>我的目的是之后向这个裸仓中提交代码时就触发自动部署流程, 所以我要编辑裸仓中的<code>post-update</code>钩子<br></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> hooks</span><br><span class="line"><span class="comment"># 使用cp来拷贝并重命名钩子文件</span></span><br><span class="line">cp post-update.sample post-update</span><br><span class="line">vi post-update</span><br></pre></td></tr></table></figure><p></p><p>然后开始写脚本了<br></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 环境变量GIT_DIR会被设置为服务端当前目录, 我们需要更新另一个git里面的文件, 所以要先重置环境变量</span></span><br><span class="line"><span class="built_in">unset</span> GIT_DIR</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定一个目录用来作为代码文件夹, 这里面存放的是要运行的代码</span></span><br><span class="line">WORK_DIR=/workspace/ks/server</span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$WORK_DIR</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化该目录为git工作仓库</span></span><br><span class="line">git init</span><br><span class="line"><span class="comment"># 指定该仓库的远程仓库地址就是我们之前建立的那个裸仓, 因为我们提交代码是提交到裸仓中的, 所以这个仓库可以从裸仓中拉取最新代码, </span></span><br><span class="line">git remote add origin /workspace/ks/ks.git</span><br><span class="line"><span class="comment"># 清除未在版本控制里面的冗余文件, 比如编译后的一些文件等等, 保证工作目录的干净</span></span><br><span class="line">git clean -df</span><br><span class="line"><span class="comment"># 拉取最新代码到工作目录中</span></span><br><span class="line">git pull origin master</span><br><span class="line"></span><br><span class="line"><span class="comment"># 现在最新的代码已经到工作目录中了, 之后可已使用 pm2 restart xxx 来重启我们的node服务</span></span><br><span class="line"><span class="comment"># 对于我来说现在可以按照新代码来重新构建镜像了, 当然了, 建新的之前先把旧的都清除掉</span></span><br><span class="line"><span class="comment"># 停止正在运行的搜索服务容器</span></span><br><span class="line">docker stop ks</span><br><span class="line"><span class="comment"># 删除这个已停止的搜索服务容器</span></span><br><span class="line">docker container rm ks</span><br><span class="line"><span class="comment"># 删除旧的搜索服务镜像</span></span><br><span class="line">docker image rm ks</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据项目根目录的 Dockerfile 来构建新镜像</span></span><br><span class="line">docker build -t ks .</span><br><span class="line"><span class="comment"># 然后使用新镜像来生成并运行新的搜索服务容器</span></span><br><span class="line">docker run -d --name ks -p 3000:3000 ks</span><br></pre></td></tr></table></figure><p></p><p>注意: 如果<code>post-update</code>执行权限不足的话可以使用<code>chmod +x post-update</code>来赋予执行权限</p><p>以上服务器端就配置完成了, 那么本地代码如何提交到服务器呢, 按照如下步骤</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 如果本地已经是一个 git 仓库了, 就不用 git init 初始化了</span></span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加刚刚配置的服务器的裸仓为本地仓库的其中一个 remote 主机</span></span><br><span class="line"><span class="comment"># 我这里给远程主机配置的名字是 server , 因为我已经把 github 上的仓库配置成 origin 了</span></span><br><span class="line"><span class="comment"># user_name 和 server_ip 是你使用 ssh 方式连接服务器时的用户名和服务器地址, : 后面的是裸仓的路径</span></span><br><span class="line">git remote add server user_name:server_ip:/worksapce/ks/ks.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 之后如果有新的代码需要推送到服务器上, 然后命令可以看到 服务器返回的一些日志信息, 表明 post-update 已被成功调用, 开始自动部署了</span></span><br><span class="line">git push server master</span><br></pre></td></tr></table></figure><p>以上脚本内容实现了如下自动化过程:</p><p>本地<code>git push</code>代码到服务器 =&gt; 服务器部署新代码 =&gt; 服务器停止并删除旧的docker里面的搜索服务 =&gt; 根据新代码生成新的docker镜像并运行新的搜索服务</p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><ul><li><a href="https://aotu.io/notes/2017/04/10/githooks/index.html" target="_blank" rel="noopener">用 Git 钩子进行简单自动部署</a></li></ul></div><div class="article-tags tags iconfont icon-tag"><a href="/tags/git/">git</a></div><div class="art-item-footer"><span class="art-item-right">下一篇: <a href="/elasticsearch/" rel="next" title="elasticsearch 笔记">elasticsearch 笔记 </a><i class="iconfont icon-arrow-circle-right"></i></span></div></section></article><script>window.subData={title:"git-hooks",subtitle:"git hooks",tools:!0}</script></div><aside class="l_side"><section class="m_widget about"><img class="avatar" src="" data-src="/images/avatar_blog.png"><div class="content"><div class="desc">Developers&#39; lives matter.</div></div></section><section class="m_widget categories"><div class="header">Categories</div><div class="content"><ul class="entry"><li><a class="flat-box" href="/categories/daily/"><div class="name">daily</div><div class="badget">1</div></a></li><li><a class="flat-box" href="/categories/database/"><div class="name">database</div><div class="badget">1</div></a></li><li><a class="flat-box" href="/categories/framework/"><div class="name">framework</div><div class="badget">1</div></a></li><li><a class="flat-box" href="/categories/front-end/"><div class="name">front-end</div><div class="badget">27</div></a></li><li><a class="flat-box" href="/categories/http/"><div class="name">http</div><div class="badget">2</div></a></li><li><a class="flat-box" href="/categories/tool/"><div class="name">tool</div><div class="badget">6</div></a></li><li><a class="flat-box" href="/categories/translation/"><div class="name">translation</div><div class="badget">1</div></a></li></ul></div></section><div class="m_widget tagcloud"><div class="header">Tags</div><div class="content"><a href="/tags/AST/" style="font-size:14px;color:grey">AST</a> <a href="/tags/CORS/" style="font-size:14px;color:grey">CORS</a> <a href="/tags/CSS/" style="font-size:14px;color:grey">CSS</a> <a href="/tags/Content-Type/" style="font-size:14px;color:grey">Content-Type</a> <a href="/tags/ES6/" style="font-size:17px;color:#404040">ES6</a> <a href="/tags/HTTP/" style="font-size:14px;color:grey">HTTP</a> <a href="/tags/HTTP-2-0/" style="font-size:14px;color:grey">HTTP/2.0</a> <a href="/tags/JavaScript/" style="font-size:14px;color:grey">JavaScript</a> <a href="/tags/MVC/" style="font-size:14px;color:grey">MVC</a> <a href="/tags/MVP/" style="font-size:14px;color:grey">MVP</a> <a href="/tags/MVVM/" style="font-size:14px;color:grey">MVVM</a> <a href="/tags/Mini-Program/" style="font-size:14px;color:grey">Mini-Program</a> <a href="/tags/SASS/" style="font-size:14px;color:grey">SASS</a> <a href="/tags/ast/" style="font-size:14px;color:grey">ast</a> <a href="/tags/async/" style="font-size:14px;color:grey">async</a> <a href="/tags/callback/" style="font-size:14px;color:grey">callback</a> <a href="/tags/codeStyle/" style="font-size:14px;color:grey">codeStyle</a> <a href="/tags/cookie/" style="font-size:14px;color:grey">cookie</a> <a href="/tags/css/" style="font-size:20px;color:#000">css</a> <a href="/tags/docker/" style="font-size:14px;color:grey">docker</a> <a href="/tags/elasticsearch/" style="font-size:14px;color:grey">elasticsearch</a> <a href="/tags/encrypt/" style="font-size:17px;color:#404040">encrypt</a> <a href="/tags/flex/" style="font-size:14px;color:grey">flex</a> <a href="/tags/function/" style="font-size:14px;color:grey">function</a> <a href="/tags/git/" style="font-size:20px;color:#000">git</a> <a href="/tags/h5/" style="font-size:17px;color:#404040">h5</a> <a href="/tags/http/" style="font-size:14px;color:grey">http</a> <a href="/tags/javascript/" style="font-size:14px;color:grey">javascript</a> <a href="/tags/js怪异事件录/" style="font-size:14px;color:grey">js怪异事件录</a> <a href="/tags/markdown/" style="font-size:14px;color:grey">markdown</a> <a href="/tags/nginx/" style="font-size:14px;color:grey">nginx</a> <a href="/tags/nodejs/" style="font-size:14px;color:grey">nodejs</a> <a href="/tags/object/" style="font-size:14px;color:grey">object</a> <a href="/tags/optimize/" style="font-size:14px;color:grey">optimize</a> <a href="/tags/promise/" style="font-size:14px;color:grey">promise</a> <a href="/tags/react/" style="font-size:14px;color:grey">react</a> <a href="/tags/redux/" style="font-size:14px;color:grey">redux</a> <a href="/tags/same-origin/" style="font-size:14px;color:grey">same-origin</a> <a href="/tags/service-worker/" style="font-size:14px;color:grey">service-worker</a> <a href="/tags/shell/" style="font-size:14px;color:grey">shell</a> <a href="/tags/speed/" style="font-size:14px;color:grey">speed</a> <a href="/tags/ssh/" style="font-size:14px;color:grey">ssh</a> <a href="/tags/toLocaleString/" style="font-size:14px;color:grey">toLocaleString</a> <a href="/tags/vue/" style="font-size:14px;color:grey">vue</a> <a href="/tags/web-font/" style="font-size:14px;color:grey">web-font</a> <a href="/tags/web优化/" style="font-size:14px;color:grey">web优化</a> <a href="/tags/yahoo/" style="font-size:14px;color:grey">yahoo</a> <a href="/tags/前端模块化/" style="font-size:14px;color:grey">前端模块化</a> <a href="/tags/国际化/" style="font-size:14px;color:grey">国际化</a></div></div><section class="m_widget links"><div class="header">Links</div><div class="content"><ul class="entry"><li><a class="flat-box" target="_blank" href="https://996.icu/#/zh_CN"><div class="name">996.icu</div></a></li></ul></div></section></aside></div></div><footer class="l_footer clearfix" style="display:none"><div class="copyright">©2018 By <a href="https://github.com/kricsleo">kricsleo</a></div><div class="framework-info">Diven - <a href="https://hexo.io/zh-cn/">Hexo</a></div></footer><script>function loadCSS() {
    const doc = document;
    const link = doc.createElement('link');
    link.rel = 'stylesheet';
    link.href = '/style.css';
    // link.href = 'https://store.kricsleo.com/blog/static/css/style.css';
    link.onload = () => {
      const dLoader = doc.getElementsByClassName('loader')[0];
      dLoader.style.opacity = 0;
      setTimeout(() => {
        dLoader.parentNode.removeChild(dLoader);
      }, 400);
    }
    doc.head.appendChild(link);
  }
  loadCSS();</script><script src="/js/index.js"></script></body>